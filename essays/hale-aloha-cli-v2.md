---
layout: essay
type: essay
title: Hale Aloha CLI v2
# All dates must be YYYY-MM-DD format!
date: 2011-12-14
labels:
  - Software Engineering
  - Project Management
---

Taking over a project that another group started is somewhat like trying to bathe a cat: there is a lot of blood and screaming involved.  This was very much the case in the work that Team Teams has done on [the project that Team cycuc created](https://code.google.com/p/hale-aloha-cli-cycuc/), though fortunately without the blood.  We began our additions to hale-aloha-cli-cycuc soon after writing our technical review of the project.  While we did discuss whether or not a developer could "successfully understand and enhance the system", all of that was based on examining standards, documentation and tools, not actually attempting to work on the project ourselves.  Without doing so, it is very difficult for us to give an accurate answer as to how easily development would progress.  Thus, this development is simply a continuation of our review of Team cycuc.

Team Teams is still comprised of the same members: [Jayson Gamiao](https://www.linkedin.com/in/jaysongamiao), [Jason Yeo](https://www.linkedin.com/in/jason-yeo-92865967), and me.  Team Teams has implemented some additional commands into Hale Aloha CLI, which are as follows:

* <code>set-baseline</code>: stores baseline values of power consumption for a given source over the course of a given day.  These values are then used for the next command, 
* <code>monitor-goal</code>: uses the baselines from <code>set-baseline</code> in conjunction with the current power consumption to determine if the given source has met a given power reduction goal.  The current time, the current power consumption value, and whether or not the source met the power reduction goal are printed at given time intervals until the system receives a carriage return. 
* <code>monitor-power</code>: prints out the current power consumption of a given source at given time intervals until the system receives a carriage return.

These commands expand the capabilities of Hale Aloha CLI in a few ways.  First, none of the prior commands truly depended on stored data.  While data was saved before — the energy consumption of the towers for <code>rank-towers</code>, for example — it was always within a particular command, and once the command was complete that data was lost.  In contrast, the <code>set-baseline</code> command explicitly stores data for later retrieval, and the <code>monitor-goal</code> command requires access to that stored data.

Another addition, related to the first, is the need for communication between different commands.  The <code>set-baseline</code> must store data in a manner allowing <code>monitor-goal</code> to access the data. 

The most complex of these new features though is the monitoring aspect.  Both <code>monitor-goal</code> and <code>monitor-power</code> must wait until the user provides some input.  In this, Team Teams did not quite achieve our objectives: though the original specifications were to end the loop upon any keystroke from the user, the actual system only checks for carriage returns.  Another deficit in the system is that the data printed to the screen is not necessarily real-time: the power values are the latest ones obtained from the server, and thus are not necessarily at the intervals that the user provides.  In some cases, output on these monitoring commands will "stutter", producing pairs of output with the same timestamp and values. 

Team Teams generally worked on this in the same manner as we had on [hale-aloha-cli-teams](http://code.google.com/p/hale-aloha-cli-teams/).  Work was distributed in much the same way; we all generally had the same responsibilities as on our original project.  As our coding standards and tools were the same as those that Team cycuc used, those naturally remained the same as well.

However, we were also much busier while working on this project due to other commitments.  Thus, rather than consistent updates throughout the project timeline one will see several spikes in activity when we had time to work on the project.  Unfortunately, this also led to us having to rush to finish the project on time and as a result most of our commits were on the day before our deadline.  We were certainly working on the project consistently, but this did not always translate to commits. 

We also tended to ask each other for assistance more often than we did on the original project.  This might have been due to increasing familiarity with one another, particularly since we all suddenly had at least one thing in common: a distinct hatred for the way that hale-aloha-cli-cycuc was structured.  On the other hand, the unknown structure of the system made some overlap in our areas of responsibility inevitable.  For example, while I handled the <code>set-baseline</code> and <code>monitor-goal</code> commands, I had to use the <code>HaleAlohaClientUI</code> class, nominally the responsibility of Jayson, to transfer data from one to the other.  In turn, while Jayson normally handled input and output, hale-aloha-cli-cycuc has the output in the <code>Command</code> implementations, so Jayson had to go into my command classes to work on the output.  Regardless of our rationales, we did work together a lot more and cover for one another. As a result, while the Issues page for hale-aloha-cli-cycuc may give a general idea of who did what, it vastly underestimates the amount of work that each of us completed.  I know that I wrote a little bit of almost every file that we added or modified for this project, and I am fairly certain that the rest of my group members did the same.

Overall, the quality of our work on hale-aloha-cli-cycuc is not too bad.  Obviously, the code is nowhere near as good as it would have been had we continued to work on our original code base.  However, the work that we have done certainly does perform as expected, and we were able to resolve at least some of the issues that we brought up in our technical review. 

Going back to the Three Prime Directives that we used in our technical review:

## Review Question 1: Does the system accomplish a useful task?
Yes, the system does accomplish what it should.  All of the commands are implemented and run properly.

## Review Question 2: Can an external user successfully install and use the system?
Yes, a user can easily download the system from the Downloads section and use the system with the .jar file available in the root directory.  The *UserGuide* page in the wiki on the project site now has instructions on the procedure for installation and running the .jar file.  The project site remains mostly unchanged and thus provides the same information as before.  Unfortunately, Team Teams was only provided committer status, and while that has generally been enough it does have its limitations.  One such limitation is the inability to change much of the project site.

Output is now slightly more organized than before.  One of the complaints that we had before concerned the units for the output values, which were incorrect or not present.  These have been standardized as kilowatts for power and kilowatt-hours for energy. 

## Review Question 3: Can an external developer successfully understand and enhance the system?
The *DeveloperGuide* page on the project wiki remains unchanged, and thus continues to provide a rudimentary explanation of how developers can build and develop the system. 

Each class and method has a description in JavaDocs.  However, Team Teams did not change any of the JavaDocs descriptions that were already in the code, save to add descriptions where none existed; as a result, some of the descriptions may not be ideal.

Building the system is difficult to accomplish due to timeouts; this may be due to my individual machine though.  The system builds perfectly fine on Jenkins. 

Jacoco coverage remains universally horrible.  Again, this is due in part to timeouts.  I admit though that the <code>Baseline</code> class, which I created, does not have a test for anything; it is only tested indirectly through its use in the <code>set-baseline</code> and <code>monitor-goal</code> commands.  This does indicate though that about half of the methods in the <code>Baseline</code> class are unnecessary since they are never called in a practical situation. 

Testing as a whole remains a bit weak.  Team Teams was unable to effectively test the code due to the structure of the hale-aloha-cli-cycuc project.  The <code>Command</code> interface has a <code>void</code> method <code>printResults</code>. Since <code>printResults</code> does not return anything, there is no return value to test.  Though it is possible to get around this through storing the most recent value as a field and creating a getter method for that field, this is not very efficient. 

Most of the coding standards violations mentioned in the technical review have been resolved.  Those that remain generally have a comment nearby explaining why they were not removed, usually due to some ambiguity or uncertainty as to whether or not it actually qualifies as a violation. 

As mentioned earlier, while looking at the *Issues* page on the project site gives a general idea of what we worked on, all the members of Team Teams worked on just about everything in the project.  Therefore, the *Issues* page does not give a clear picture of who was responsible for what.  The number of issues per team member is fairly useless as a measure of determining if work distribution was equal; if I personally had many issues, it is because most of them were small and were sometimes typed up as I was completing the solution in question.  (Of course, one might argue that working on small issues is an essential component of Issue Driven Project Management.)

The Jenkins page shows that most build failures were resolved fairly quickly.  The exception is on 9 December 2011, when the system remained in a failed state for some time.  This was detailed in Issue 36.  Annoyingly, the solution to this had been known for some weeks, yet Team cycuc had not implemented the solution themselves. 

A quick scan over the Updates page of the project site indicates that 28 of the 38 commits since Team Teams took over hale-aloha-cli-cycuc were associated with a particular issue.  This means that about 74% of the updates were associated with an issue.  This is an increase of a whole 3% from our work on hale-aloha-cli-teams, according to one of the technical reviews of our original project.  Clearly, Team Teams is making great strides towards improvement in remembering to list the issues that they are making commits for.  As mentioned above, updates were more sporadic and tended to be grouped together; nonetheless, work on the project was fairly consistent.

The most difficult part of working on hale-aloha-cli-cycuc was trying to understand a nearly foreign manner of doing things.  In the technical review of hale-aloha-cli-cycuc, I stated that having implemented the project ourselves might have made it easier to understand what Team cycuc was doing.  However, when actually working on the project, this almost had an inverse effect of that expected.  Because we were so familiar with our project and our way of doing things, it was difficult to adjust to the new project.  The system would be just similar enough for us to think that we knew how to create a solution, and then of course we would find out that the solution did not work at all, forcing us to learn about most of the code before we could accomplish anything.  I do not believe that the continued development of hale-aloha-cli-cycuc under different management from the original owners would have been possible had my group members not been as dedicated and resourceful as they are, and I am honored to have contributed in a small way to their efforts. 

In many ways, it is tempting to blame the difficulties that we had on the way that Team cycuc structured their system.  It is difficult to tell where "different from how I would do it" becomes "who in their right mind would design something like this", and admittedly one tends to think the latter more often when under pressure. We knew going into this that developing hale-aloha-cli cycuc would not be an easy task, having found several areas for improvement in our technical review, yet actually working on the project was much harder than I at least had anticipated.  It certainly seems more productive to continue working on the same project rather than constantly moving to work on code that someone else has written; I am certain that we could have implemented the three commands within a week and a half had we remained with hale-aloha-cli-teams.  However, this process of taking over projects from other developers, or even just cooperating with other developers, is undoubtedly what we will have to do as software engineers, and this exercise has certainly given us of Team Teams a lot of practice in that skill.  It has also confirmed that all development teams should have a trained psychiatrist available, but given that I thought so before this project it is doubtful if that qualifies as a lesson learned from the experience.